local destroyed = false

local function protectGui(obj)
    if destroyed then
        obj.Parent = game.CoreGui
        return
    end
    if syn and syn.protect_gui then
        syn.protect_gui(obj)
    elseif PROTOSMASHER_LOADED then
        obj.Parent = get_hidden_gui()
    end
    obj.Parent = game.CoreGui
end

local TweenService = game:GetService("TweenService")

local function notify(args)
    args.Name = args.Name or "No Content"
    args.Description = args.Description or "HA HA HA"
    args.Time = args.Time or 5

    if game.CoreGui:FindFirstChild('Notification') then
        local frame = game.CoreGui.Notification:FindFirstChildWhichIsA('Frame')
        if frame then
            local tweenInfoDelete = TweenInfo.new(0.2, Enum.EasingStyle.Sine, Enum.EasingDirection.In)
            local tweenGoalDelete = {Position = UDim2.new(1, -170, 0.67, 0)}
            local tweenDelete = TweenService:Create(frame, tweenInfoDelete, tweenGoalDelete)

            tweenDelete:Play()
            tweenDelete.Completed:Connect(function()
                game.CoreGui.Notification:Destroy()
            end)
        end
        task.wait(0.3)
    end

    local ScreenGui = Instance.new("ScreenGui")
    local Frame = Instance.new("Frame")
    local UICorner = Instance.new("UICorner")
    local icon = Instance.new("ImageLabel")
    local title = Instance.new("TextLabel")
    local UIPadding = Instance.new("UIPadding")
    local description = Instance.new("TextLabel")

    ScreenGui.Name = "Notification"
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    protectGui(ScreenGui)

    Frame.Parent = ScreenGui
    Frame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Frame.Position = UDim2.new(1, 0, 0.7, 0)
    Frame.Size = UDim2.new(0, 170, 0, 65)

    UICorner.CornerRadius = UDim.new(0, 3)
    UICorner.Parent = Frame

    icon.Name = "icon"
    icon.Parent = Frame
    icon.BackgroundTransparency = 1
    icon.Position = UDim2.new(0, 5, 0, 5)
    icon.Size = UDim2.new(0, 50, 0, 50)
    icon.Image = "rbxassetid://11745872910"

    title.Name = "title"
    title.Parent = Frame
    title.BackgroundTransparency = 1
    title.Position = UDim2.new(0.379, 0, 0.077, 0)
    title.Size = UDim2.new(0, 92, 0, 23)
    title.Text = args.Name or "No Content"
    title.Font = Enum.Font.GothamSemibold
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 14
    title.TextXAlignment = Enum.TextXAlignment.Left

    UIPadding.PaddingLeft = UDim.new(0, 7)
    UIPadding.Parent = title

    description.Name = "description"
    description.Parent = Frame
    description.BackgroundTransparency = 1
    description.Position = UDim2.new(0.379, 0, 0.405, 0)
    description.Size = UDim2.new(0, 92, 0, 30)
    description.Text = args.Description or "No Content"
    description.Font = Enum.Font.SourceSans
    description.TextColor3 = Color3.fromRGB(111, 111, 111)
    description.TextSize = 12.5
    description.TextXAlignment = Enum.TextXAlignment.Left
    description.TextYAlignment = Enum.TextYAlignment.Top
    UIPadding:Clone().Parent = description

    local tweenInfoAppear = TweenInfo.new(0.5, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)
    local tweenGoalAppear = {Position = UDim2.new(1, -170, 0.7, 0)}
    local tweenAppear = TweenService:Create(Frame, tweenInfoAppear, tweenGoalAppear)
    tweenAppear:Play()

    task.delay(args.Time, function()
        if ScreenGui and ScreenGui.Parent then
            local tweenInfoDelete = TweenInfo.new(0.3, Enum.EasingStyle.Sine, Enum.EasingDirection.In)
            local tweenGoalDelete = {Position = UDim2.new(1, -170, 0.67, 0)}
            local tweenDelete = TweenService:Create(Frame, tweenInfoDelete, tweenGoalDelete)

            tweenDelete:Play()
            tweenDelete.Completed:Connect(function()
                ScreenGui:Destroy()
            end)
        end
    end)
end

return notify
